1.用gazebo加载模型gazebo崩溃，之前在笔记本上也出现过这种情况，目前尝试查看夏令营带回来的代码看能不能找到解决问题的办法
 <geometry>
        <mesh filename="package://car_urdf/meshes/left_front_orient_Link.STL"/>
      </geometry>
改为
      <geometry>
        <mesh
          filename="file://$(find car_urdf)/meshes/base_link.STL" />
      </geometry>
————————————————
版权声明：本文为CSDN博主「G果」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/weixin_42899627/article/details/142005482
成功解决问题


2.接下来是解决模型在gazebo中不显色的问题，以及添加插件实现传感器功能并且完成在名空间内发布名重定向以及在rviz的订阅
gazebo中不显色主要是因为之前的显色配置都是rviz兼容的，而gazebo不兼容，想要在gazebo中显色得额外在link标签内用gazbeo标签或者其他的显色配置标签来进行配置
使用了ros2和gazebo联动的一个插件完成了话题的发布并成功的在rviz2中进行订阅，不过再次发现很多libgazebo_ros开头的插件都是没有那么好用的，尤其是在gazebo11以及ros2环境下，尽量寻找gazebo和ros2环境下使用的插件：
  <gazebo reference="depth_cam_link">
    <sensor name="depth_camera_sensor" type="depth">
      <update_rate>30.0</update_rate>
      <visualize>true</visualize>
      <camera>
        <horizontal_fov>1.047</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.1</near>
          <far>5.0</far>
        </clip>
      </camera>

      <plugin name="gazebo_ros_camera" filename="libgazebo_ros_camera.so">
        <ros>
          <namespace>/camera</namespace>
          <argument>depth_enabled:=true</argument>
          <argument>point_cloud_enabled:=true</argument>
        </ros>

        <camera_name>depth_camera</camera_name>
        <frame_name>depth_cam_link</frame_name>

        <!-- ROS 话题 -->
        <image_topic_name>color/image_raw</image_topic_name>
        <camera_info_topic_name>color/camera_info</camera_info_topic_name>
        <depth_image_topic_name>depth/image_raw</depth_image_topic_name>
        <depth_camera_info_topic_name>depth/camera_info</depth_camera_info_topic_name>
        <point_cloud_topic_name>depth/points</point_cloud_topic_name>

        <pointCloudCutoff>0.3</pointCloudCutoff>
        <pointCloudCutoffMax>5.0</pointCloudCutoffMax>
      </plugin>
    </sensor>
  </gazebo>

3.日后可能碰到的问题（在gazebo中添加深度相机需要的相关参数配置）在此留下可能能解决问题的网址，如果遇到了可以查阅以供参考：
https://classic.gazebosim.org/tutorials?tut=ros_depth_camera&cat=connect_ros


4.对ros2的许多命令都还不熟悉，这对后续理解整个结构和工作流以及可能存在的文件编写有阻碍，还有gazebo中机械臂关节疲软的问题
包括如果使用libgazebo_ros_diff插件轮子进行控制会出现轮子乱跳问题，以及就算不配置插件，轮子也会出现与底盘脱落的情况，不知道是不是自重过大导致物理上成受不了

目前查到的都是需要对被控制的joint添加ros_control插件，有些提到了传动，以及摩擦系数
不过上述的配置方式更像是ros1和gazebo之间的配置方式，所以可能需要查询在适配ros2的时候是不是会需要修改更新插件，以及配置方式是不是发生了改变

目前经查询以及询问AI，得到目前觉得可行的方案如下：
| 模块                                  | 作用                                   | 文件类型              | ROS 2 对应插件/包                                           | 是否必须      |
| ----------------------------------   | ------------------------------         | -------------        | ------------------------------------------------------ | --------- |
| **URDF / Xacro**                     | 定义机器人模型、关节、link                 | `.urdf.xacro`        | —                                                      | ✅         |
| **Transmission 元素**                 | 连接关节与执行器                          | URDF 内部标签         | `<transmission>`                                       | ✅         |
| **gazebo_ros2_control 插件**          | 让 Gazebo 识别 ROS 2 控制接口            | URDF 插件部分         | `libgazebo_ros2_control.so`                            | ✅         |
| **ros2_control HardwareInterface**   | 定义硬件抽象（joint 的命令/状态）           | `.yaml`              | `ros2_control` 框架                                      | ✅         |
| **Controller Manager**               | 管理所有控制器                            | `.yaml` + 节点        | `controller_manager`                                   | ✅         |
| **Controllers**                      | 执行具体控制，如速度/轨迹/位置               | `.yaml`              | `joint_trajectory_controller`, `diff_drive_controller` | ✅         |
| **Joint State Broadcaster**          | 发布 joint_states 给 RViz/MoveIt2        |`.yaml`               | `joint_state_broadcaster`                              | ✅         |
| **MoveIt2 配置**                      | 规划与执行轨迹                            | SRDF + YAML          | `moveit2` + `move_group`                               | ⚙️（如果要规划） |

此前出现了controller_manager无法启动的情况，导致根本无法把控制关节的话题发布出来，在参考了暑期夏令营的piper机械臂的配置以后部分完成了相关配置，成功启动了controller_manager，但是对应的插件还是无法启动
报错类似如下：
Failed loading controller arm_controller
且相关的可参考官方文档在如下网址：https://control.ros.org/humble/doc/gazebo_ros2_control/doc/index.html?utm_source=chatgpt.com

在这个手册中的例子中可以控制关节移动，且非瞬间位置变换，而是有渐进的关节变换

在用ros2 launch moveit_setup_assignment setup_assignment.launch.py文件启动moveit2的一键配置的时候出现个别模型load files崩溃的情况，包括但不限于加载官方的resources库中的文件
在尝试重新编译整个工作空间以后问题解决,且我发现即使是将工作空间的setuo.bash文件放到~/.bashrc文件下，source ~/.bashrc也不行，必须得source你将要加载的urdf文件所在的工作空间的setup.bash文件才行
例如我是想加载jetrover_ws下的某个urdf，那就必须source ～/jetrover_ws/install/setup.bash
目前是将arm.urdf.xacro文件直接转换成urdf文件格式是可以在moevit中加载的，但是可能还是需要提前编译整个工作空间，且直接将jetrover文件转换成xacro文件格式依旧无法加载，不过考虑到后续发布控制机械臂的话题只需要包括机械臂的几个关节就可以，一次不一定非要包含底座部分



          Moveit! 问题
          问题1： 当运行
          roslaunch moveit_setup_assistant setup_assistant.launch
          选择模型加载时，会突然系统崩溃。提示如下信息：
          [rospack] Error: no package given
          [librospack]: error while executing command
          [ INFO] [1496720764.674712823]: Running 'rosrun xacro xacro.py /home/carl/Desktop/Project/turtlebot2i/src/turtlebot2i/turtlebot2i_description/robots/kobuki_interbotix_zr300.urdf.xacro'...
          [ INFO] [1496720765.546447152]: Loaded turtlebot robot model.
          [ INFO] [1496720765.546519891]: Setting Param Server with Robot Description
          [ INFO] [1496720765.555161202]: Robot semantic model successfully loaded.
          [ INFO] [1496720765.555195476]: Setting Param Server with Robot Semantic Description
          [ INFO] [1496720765.570819680]: Loading robot model 'turtlebot'...
          [ INFO] [1496720765.570888991]: No root/virtual joint specified in SRDF. Assuming fixed joint
          ================================================================================REQUIRED process [moveit_setup_assistant-1] has died!
          process has died [pid 8123, exit code -11, cmd /opt/ros/indigo/lib/moveit_setup_assistant/moveit_setup_assistant __name:=moveit_setup_assistant __log:=/home/carl/.ros/log/689c9c26-4a64-11e7-8883-d85de2b5c407/moveit_setup_assistant-1.log].
          log file: /home/carl/.ros/log/689c9c26-4a64-11e7-8883-d85de2b5c407/moveit_setup_assistant-1*.log
          Initiating shutdown!
          ================================================================================
          [moveit_setup_assistant-1] killing on exit
          shutting down processing monitor...
          ... shutting down processing monitor complete
          done
          
          说明：
          
              单独加载模型没问题.
              使用moveit_setup加载其他模型有的没问题（例如，Turtlebot）。
              只是使用有些模型会出现突然崩溃的情况。
          解决方案：
          方式1：检查模型中模型的属性，里面的是否加载的是.dae或.stl文件，如果有，将.dae或.stl替换成urdf本身自有的属性，例如，等。 举例：将
                <collision>
                  <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>
                  <geometry>
                    <mesh filename="package://turtlebot2i_description/meshes/sensors/sr300.stl" scale="2.0 2.0 2.0" />
                  </geometry>
                </collision>
          
          替换成
                <collision>
                  <origin xyz="0 0 0" rpy="0 0 0"/>
                  <geometry>
                    <cylinder length="0.006" radius="0.170"/>
                  </geometry>
                </collision>
          
          方式2：测试了下moveit_setup_assistant，发现模型加载mesh时，会出错，方式1是将现有属性替换，另外一种方式是改变自己制作的dae或stl文件名，不清楚什么原因，moveit_setup_assistant加载dae或stl时，模型名必须为小写，如果有大写出现就会报错，例如将Test_Finger.dae修改为test_finger.dae就不会造成崩溃。
          
          方式3：如果是在加载别人做的dae或stl文件时，需要将dae或stl文件重写，我使用的是blender，将stl重新导出stl就不会造成崩溃。其他3D建模也可以尝试下，3D Max，solidworks，inventor等等。


目前在moveit_setup_assignment中load files崩溃，在使用chat进行排除最后结论如下：
         不是 GPU 驱动冲突造成的崩溃，而是 MoveIt 自身嵌入 RViz 视图的 Qt 属性访问 bug。
         这个问题在 ROS 2 Humble 的某些版本 中非常常见（尤其是 2024 年前的 Debian 包版本）

于11.4晚成功load files记载成功urdf文件，不过在运行demo_rviz.launch文件的时候MoveIt 启动文件（launch 文件）中 没有成功加载 SRDF 内容到参数服务器。无法成功显示模型文件


b站上在介绍moveit控制并规划机械臂轨迹并发布话题以供gazebo进行订阅，在这个视频中也出现了无法moveit开启的rviz窗口无法显示模型，但是在终端上有一个what()开头的报错显示moveit的关节速度限制传输数据类型应该是double但是给了一个int类型的数据
在config文件夹内找到这个yaml文件给每个关节的速度限制的数据改变一下数据类型就可以正常显示了

在启动moveit的时候输入以下命令可以正常启动：
QT_QPA_PLATFORM=xcb ros2 launch moveit_setup_assistant setup_assistant.launch.py
